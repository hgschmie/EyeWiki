<?xml version="1.0" encoding="UTF-8"?>

<!-- ======================================================================== -->
<!--                                                                          -->
<!--  maven Buildfile                                                         -->
<!--                                                                          -->
<!-- $Id: maven.xml 2360 2004-08-03 10:38:25Z henning $ -->
<!--                                                                          -->
<!-- ======================================================================== -->

<project
  xmlns:ant="jelly:ant"
  xmlns:maven="jelly:maven"
  default="jar:jar">

  <postGoal name="war:webapp">
    <!-- Copy Properties File -->
    <ant:copy file="etc/jspwiki.properties.tmpl" tofile="${maven.war.webapp.dir}/WEB-INF/jspwiki.properties" />
    <ant:replace file="${maven.war.webapp.dir}/WEB-INF/jspwiki.properties"
               replacefilterfile="build.properties"/>

    <!-- Copy TagLibs Files -->
    <ant:copy todir="${maven.war.webapp.dir}/WEB-INF" >
      <ant:fileset dir="etc">
        <include name="**/*.tld"/>
      </ant:fileset>
    </ant:copy>

  </postGoal>

  <preGoal name="test:test-resources">
    <ant:mkdir dir="${maven.build.dir}/tests" />

    <ant:copy file="src/test/etc/TextFormattingRules.txt" tofile="${maven.build.dir}/test-classes/TextFormattingRules.txt" />
    <ant:copy file="src/test/etc/TestPlugins.txt" tofile="${maven.build.dir}/test-classes/TestPlugins.txt" />

    <ant:copy file="src/test/etc/jspwiki.properties.tmpl" tofile="${maven.build.dir}/test-classes/jspwiki.properties" />
    <ant:copy file="src/test/etc/jspwiki_rcs.properties.tmpl" tofile="${maven.build.dir}/test-classes/jspwiki_rcs.properties" />
    <ant:copy file="src/test/etc/jspwiki_vers.properties.tmpl" tofile="${maven.build.dir}/test-classes/jspwiki_vers.properties" />
    <ant:replace file="${maven.build.dir}/test-classes/jspwiki.properties"
               replacefilterfile="build.properties"/>
    <ant:replace file="${maven.build.dir}/test-classes/jspwiki_rcs.properties"
               replacefilterfile="build.properties"/>
    <ant:replace file="${maven.build.dir}/test-classes/jspwiki_vers.properties"
               replacefilterfile="build.properties"/>

  </preGoal>

</project>


